<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_broiler_farm_dashboard_form" model="ir.ui.view">
            <field name="name">broiler.farm.dashboard.form</field>
            <field name="model">broiler.farm.dashboard</field>
            <field name="arch" type="xml">
                <form string="Dashboard Granja">
                    <div class="o_broiler_dashboard">
                        <!-- Header con botón -->
                        <div class="row mx-0 mb-2">
                            <div class="col-12">
                                <button name="action_view_pending_pickings" type="object" class="btn btn-primary">
                                    <i class="fa fa-truck"/> Ver Pickings Pendientes
                                </button>
                            </div>
                        </div>

                        <!-- Sección de Cards KPIs -->
                        <div class="row mx-0 mb-2">
                            <div class="col-6 col-lg-2 mb-1">
                                <div class="card h-100 border-primary">
                                    <div class="card-body p-2 text-center">
                                        <h4 class="mb-0"><field name="total_flocks"/></h4>
                                        <small class="text-muted">Total Lotes</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-2 mb-1">
                                <div class="card h-100 border-success">
                                    <div class="card-body p-2 text-center">
                                        <h4 class="mb-0"><field name="active_flocks"/></h4>
                                        <small class="text-muted">Activos</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-2 mb-1">
                                <div class="card h-100 border-warning">
                                    <div class="card-body p-2 text-center">
                                        <h4 class="mb-0"><field name="alive_birds"/></h4>
                                        <small class="text-muted">Aves Vivas</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-2 mb-1">
                                <div class="card h-100 border-danger">
                                    <div class="card-body p-2 text-center">
                                        <h4 class="mb-0"><field name="pending_pickings_count"/></h4>
                                        <small class="text-muted">Pickings Pend.</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-2 mb-1">
                                <div class="card h-100">
                                    <div class="card-body p-2 text-center">
                                        <h5 class="mb-0"><field name="total_cost" widget="monetary"/></h5>
                                        <small class="text-muted">Costo Total</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-2 mb-1">
                                <div class="card h-100">
                                    <div class="card-body p-2 text-center">
                                        <h5 class="mb-0"><field name="avg_weight_g"/> <small>g</small></h5>
                                        <small class="text-muted">Peso Prom.</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sección de Detalles adicionales (cards) -->
                        <div class="row mx-0 mb-2">
                            <div class="col-md-3 mb-2">
                                <div class="card h-100">
                                    <div class="card-body p-2 text-center">
                                        <h5 class="mb-0"><field name="closed_flocks"/></h5>
                                        <small class="text-muted">Lotes Cerrados</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-2">
                                <div class="card h-100">
                                    <div class="card-body p-2 text-center">
                                        <h5 class="mb-0"><field name="dead_birds"/></h5>
                                        <small class="text-muted">Mortalidad</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-2">
                                <div class="card h-100">
                                    <div class="card-body p-2 text-center">
                                        <h5 class="mb-0"><field name="total_feed_cost" widget="monetary"/></h5>
                                        <small class="text-muted">Costo Alimento</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-2">
                                <div class="card h-100">
                                    <div class="card-body p-2 text-center">
                                        <h5 class="mb-0"><field name="avg_fcr"/></h5>
                                        <small class="text-muted">FCR</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sección de Gráficos -->
                        <div class="row mx-0 mb-2">
                            <div class="col-md-6 mb-2">
                                <div class="card h-100">
                                    <div class="card-header">
                                        <i class="fa fa-pie-chart"/> Estado de Lotes
                                    </div>
                                    <div class="card-body">
                                        <field name="flocks_graph" widget="dashboard_graph" graph_type="pie"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <div class="card h-100">
                                    <div class="card-header">
                                        <i class="fa fa-bar-chart"/> Pickings Pendientes
                                    </div>
                                    <div class="card-body">
                                        <field name="pickings_graph" widget="dashboard_graph" graph_type="bar"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </field>
        </record>

        <record id="action_broiler_farm_dashboard" model="ir.actions.act_window">
            <field name="name">Dashboard Granja</field>
            <field name="res_model">broiler.farm.dashboard</field>
            <field name="view_mode">form</field>
            <field name="target">main</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Dashboard de la Granja de Pollos
                </p>
            </field>
        </record>

        <record id="default_dashboard_record" model="broiler.farm.dashboard">
            <field name="display_name">Dashboard Granja</field>
        </record>
    </data>
</odoo>
